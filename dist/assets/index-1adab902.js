import{aa as W,ab as X,T as s,ac as Y,a3 as Z,ad as ee,r as u,ae as te,o as f,d as $,e as a,f as l,w as i,i as x,x as le,t as n,h,g as L,c as b}from"./main-94287103.js";import{L as se}from"./LeavesNave-df809918.js";const ae={class:"grid",style:{"overflow-x":"scroll"}},oe={class:"col-12"},ie={style:{},class:"shadow-xl"},ne={class:"flex w-full justify-between align-items-center"},ue={class:"m-0 my-auto"},de={class:"block mt-2 md:mt-0 p-input-icon-left"},re=a("i",{class:"pi pi-search"},null,-1),ce={class:"flex align-items-center justify-content-center"},pe=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ve={key:0},me={class:"flex flex-column gap-2"},fe={class:"w-full text-right",for:"username"},he={key:0,class:"mt-1 mb-5 text-red-500"},be={class:"w-full text-center"},ye={class:"flex flex-column gap-2"},_e={class:"w-full text-right",for:"username"},ge={key:0,class:"mt-1 mb-5 text-red-500"},we={class:"w-full text-center"},Ce={__name:"index",setup(ke){const C=W(),j=X(),N=s([]),P=s(!0),B=s({}),r=s(""),V=s(null);s(!1);const p=s(!1),D=s(""),M=s(null),R=s(null),y=s({}),c=s(!1),S=s({}),_=s({}),g=s(!1);Y(()=>{G()});const F=()=>{b.post("/api/users").then(e=>{N.value=e.data.users.data})},w=()=>{b.get("/api/leave-balance").then(e=>{P.value=!1,V.value=e.data.data[0].balance,console.log(V.value)})};Z(()=>{w(),F()});const I=e=>{j.push({name:"Employee-update",params:{id:e}})},q=()=>{b.post(`/api/mileston-levels/${D.value}`,_.value).then(e=>{console.log(e.data),w(),g.value=!g.value,C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),S.value=s({})}).catch(e=>{r.value=e.response.data.errors})},A=()=>{c.value=!c.value},E=e=>{console.log(e),p.value=!0,D.value=e},z=()=>{b.post("/api/employees/import-users",_.value).then(e=>{console.log(e.data),w(),c.value=!c.value,C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=s({})}).catch(e=>{r.value=e.response.data.errors})},O=()=>{b.delete(`/api/leave-balance/${D.value}`).then(e=>{console.log(e.data),p.value=!1,w(),C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},G=()=>{y.value={global:{value:null,matchMode:ee.CONTAINS}}};return(e,o)=>{const H=u("Toast"),d=u("Button"),U=u("InputText"),v=u("Column"),J=u("DataTable"),T=u("Dialog"),K=u("MultiSelect"),Q=u("va-card"),k=te("can");return f(),$("div",ae,[a("div",oe,[l(Q,{class:"card"},{default:i(()=>[l(se),l(H),a("div",ie,[x((f(),le(J,{ref_key:"dt",ref:R,selection:M.value,"onUpdate:selection":o[1]||(o[1]=t=>M.value=t),value:V.value,loading:P.value,"data-key":"id",paginator:!0,rows:10,filters:y.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:i(()=>[a("div",ne,[x(l(d,{label:e.$t("create_button"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:A},null,8,["label"]),[[k,"skills create"]]),a("h5",ue,n(e.$t("levels")),1),a("div",null,[a("span",de,[re,l(U,{modelValue:y.value.global.value,"onUpdate:modelValue":o[0]||(o[0]=t=>y.value.global.value=t),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:i(()=>[l(v,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(v,{field:"type",header:e.$t("type"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:i(t=>[h(n(t.data.type),1)]),_:1},8,["header"]),l(v,{field:"title",header:e.$t("title"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:i(t=>[h(n(t.data.title),1)]),_:1},8,["header"]),l(v,{field:"days",header:e.$t("days"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:i(t=>[h(n(t.data.days),1)]),_:1},8,["header"]),l(v,{"header-style":"min-width:10rem;"},{body:i(t=>[a("div",null,[x(l(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:m=>I(t.data.id)},null,8,["onClick"]),[[k,"skills edit"]]),x(l(d,{icon:"pi pi-trash",class:"delete mt-2",onClick:m=>E(t.data.id)},null,8,["onClick"]),[[k,"skills delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[k,"skills list"]]),l(T,{visible:p.value,"onUpdate:visible":o[3]||(o[3]=t=>p.value=t),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:i(()=>[l(d,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:o[2]||(o[2]=t=>p.value=!1)},null,8,["label"]),l(d,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:O},null,8,["label"])]),default:i(()=>[a("div",ce,[pe,B.value?(f(),$("span",ve,[h(n(e.$t("remove_item"))+" ",1),a("b",null,n(B.value.first_name),1),h("?")])):L("",!0)])]),_:1},8,["visible","header"]),l(T,{visible:c.value,"onUpdate:visible":o[5]||(o[5]=t=>c.value=t),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:i(()=>{var t;return[a("div",me,[a("label",fe,n(e.$t("users")),1),l(K,{modelValue:_.value.users_ids,"onUpdate:modelValue":o[4]||(o[4]=m=>_.value.users_ids=m),required:"",id:"pv_id_1",style:{direction:"ltr !important"},"option-value":"id",filter:"",options:N.value,optionLabel:"name",placeholder:e.$t("users"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(t=r.value)!=null&&t.name?(f(),$("div",he,n(r.value.name[0]),1)):L("",!0)]),a("div",be,[l(d,{onClick:z,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),l(T,{visible:g.value,"onUpdate:visible":o[7]||(o[7]=t=>g.value=t),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:i(()=>{var t;return[a("div",ye,[a("label",_e,n(e.$t("title")),1),l(U,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:S.value.title,"onUpdate:modelValue":o[6]||(o[6]=m=>S.value.title=m),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(t=r.value)!=null&&t.title?(f(),$("div",ge,n(r.value.name[0]),1)):L("",!0)]),a("div",we,[l(d,{onClick:q,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{Ce as default};
