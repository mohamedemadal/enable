import{aa as Q,ab as W,T as o,ac as X,a3 as Y,ad as Z,r as u,ae as ee,o as b,d as $,e as s,f as a,w as i,i as h,x as le,t as r,h as P,g as L,c as v}from"./main-5b9540dc.js";const te={class:"grid",style:{"overflow-x":"scroll"}},ae={class:"col-12"},se={class:"my-2"},oe={style:{},class:"shadow-xl"},ie={class:"flex w-full justify-between align-items-center"},ne={class:"m-0 my-auto"},ue={class:"block mt-2 md:mt-0 p-input-icon-left"},de=s("i",{class:"pi pi-search"},null,-1),re={class:"flex align-items-center justify-content-center"},ce=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),pe={key:0},me={class:"flex flex-column gap-2"},ve={class:"w-full text-right",for:"username"},fe={key:0,class:"mt-1 mb-5 text-red-500"},ye={class:"w-full text-center"},_e={class:"flex flex-column gap-2"},be={class:"w-full text-right",for:"username"},he={key:0,class:"mt-1 mb-5 text-red-500"},ge={class:"w-full text-center"},$e={__name:"index",setup(ke){const C=Q();W();const x=o({}),V=o(!0),N=o({}),c=o(""),S=o(null);o(!1);const f=o(!1),g=o(""),B=o(null),M=o(null),k=o({}),p=o(!1),n=o({}),m=o(!1);X(()=>{E()});const w=()=>{v.get("/api/payroll").then(e=>{V.value=!1,S.value=e.data.data,console.log(S.value)}),v.get("/api/employees").then(e=>{x.value=e.data.data})};Y(()=>{w()});const R=e=>{v.get(`/api/payroll/${e}`).then(t=>{V.value=!1,n.value=t.data.data}),g.value=e,m.value=!m.value},j=()=>{v.put(`/api/payroll/${g.value}`,n.value).then(e=>{console.log(e.data),w(),m.value=!m.value,C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),n.value=o({})}).catch(e=>{c.value=e.response.data.errors})},F=()=>{p.value=!p.value,n.value={}},I=e=>{console.log(e),f.value=!0,g.value=e},q=()=>{v.post("/api/payroll",n.value).then(e=>{console.log(e.data),w(),p.value=!p.value,C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),n.value=o({})}).catch(e=>{c.value=e.response.data.errors})},A=()=>{v.delete(`/api/payroll/${g.value}`).then(e=>{console.log(e.data),f.value=!1,w(),C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},z=()=>{M.value.exportCSV()},E=()=>{k.value={global:{value:null,matchMode:Z.CONTAINS}}};return(e,t)=>{const d=u("Button"),O=u("Toolbar"),G=u("Toast"),H=u("InputText"),T=u("Column"),J=u("DataTable"),D=u("Dialog"),U=u("MultiSelect"),K=u("va-card"),y=ee("can");return b(),$("div",te,[s("div",ae,[a(K,{class:"card"},{default:i(()=>[a(O,{class:"mb-4 shadow-md"},{start:i(()=>[s("div",se,[h(a(d,{label:e.$t("payroll"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:F},null,8,["label"]),[[y,"skills create"]])])]),end:i(()=>[h(a(d,{label:e.$t("export"),icon:"pi pi-upload",class:"export",onClick:t[0]||(t[0]=l=>z(l))},null,8,["label"]),[[y,"skills list"]])]),_:1}),a(G),s("div",oe,[h((b(),le(J,{ref_key:"dt",ref:M,selection:B.value,"onUpdate:selection":t[2]||(t[2]=l=>B.value=l),value:S.value,loading:V.value,"data-key":"id",paginator:!0,rows:10,filters:k.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:i(()=>[s("div",ie,[s("h5",ne,r(e.$t("payroll")),1),s("div",null,[s("span",ue,[de,a(H,{modelValue:k.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=l=>k.value.global.value=l),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:i(()=>[a(T,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(T,{field:"name",header:e.$t("employee_payroll"),sortable:!0,"header-style":"width:20%; min-width:10rem;",class:"ltr:text-justify"},{body:i(l=>[P(r(l.data.name),1)]),_:1},8,["header"]),a(T,{"header-style":"min-width:10rem;"},{body:i(l=>[s("div",null,[h(a(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:_=>R(l.data.id)},null,8,["onClick"]),[[y,"skills edit"]]),h(a(d,{icon:"pi pi-trash",class:"delete mt-2",onClick:_=>I(l.data.id)},null,8,["onClick"]),[[y,"skills delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[y,"skills list"]]),a(D,{visible:f.value,"onUpdate:visible":t[4]||(t[4]=l=>f.value=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:i(()=>[a(d,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=l=>f.value=!1)},null,8,["label"]),a(d,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:A},null,8,["label"])]),default:i(()=>[s("div",re,[ce,N.value?(b(),$("span",pe,[P(r(e.$t("remove_item"))+" ",1),s("b",null,r(N.value.first_name),1),P("?")])):L("",!0)])]),_:1},8,["visible","header"]),a(D,{visible:p.value,"onUpdate:visible":t[6]||(t[6]=l=>p.value=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:i(()=>{var l;return[s("div",me,[s("label",ve,r(e.$t("employee_payroll")),1),a(U,{modelValue:n.value.employees_ids,"onUpdate:modelValue":t[5]||(t[5]=_=>n.value.employees_ids=_),required:"",id:"pv_id_1",style:{direction:"ltr !important"},"option-value":"id",filter:"",options:x.value,optionLabel:"name",placeholder:e.$t("employee_payroll"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(l=c.value)!=null&&l.employees_ids?(b(),$("div",fe,r(c.value.employees_ids[0]),1)):L("",!0)]),s("div",ye,[a(d,{onClick:q,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),a(D,{visible:m.value,"onUpdate:visible":t[8]||(t[8]=l=>m.value=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:i(()=>{var l;return[s("div",_e,[s("label",be,r(e.$t("employee_payroll")),1),a(U,{modelValue:n.value.employees_ids,"onUpdate:modelValue":t[7]||(t[7]=_=>n.value.employees_ids=_),required:"",id:"pv_id_1",style:{direction:"ltr !important"},"option-value":"id",filter:"",options:x.value,optionLabel:"name",placeholder:e.$t("employee_payroll"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(l=c.value)!=null&&l.employees_ids?(b(),$("div",he,r(c.value.employees_ids[0]),1)):L("",!0)]),s("div",ge,[a(d,{onClick:j,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{$e as default};
