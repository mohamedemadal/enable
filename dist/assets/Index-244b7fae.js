import{F as D,i as w,a as M,b as V,c as S,l as v}from"./ar-ff8ef89c.js";import{_ as B,H as T,bf as I,T as g,c as i,D as s,r as h,o as n,d as m,e as l,f as c,w as b,J as F,h as L,t as u,$ as E,g as p,i as Y,v as k,x as f}from"./main-499ead15.js";const G={components:{FullCalendar:D,Calendar:T},data(){return{langStore:I(),visible:!1,doctorshow:"",doctors:{},user_type:"",create_visible:!1,event_id:null,creat_event:g(!1),updat_event:g(!1),event_title:"",start_event:"",end_event:"",loading:!1,modal_text:"",time_start:"",time_end:"",opts:{plugins:[w,M,V,S],initialView:"dayGridMonth",footerToolbar:!0,valid:!1,buttonIcons:!1,locale:null,validRange:{start:new Date},selectable:!0,droppable:!1,editable:!0,selectHelper:!0,validRange:{start:new Date},headerToolbar:{center:"prev next today",left:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},eventsTimeFormat:{hour:"2-digit",minute:"2-digit",second:"2-digit"},eventDrop:function(e){console.log(e.event.id),i.post(`/api/calender/${e.event.id}/update`,{start:e.event.start,end:e.event.end}).then(o=>{console.log(o.data.k)})},eventDrop:function(e){i.post(`/api/calender/${e.event.id}/update`,{title:e.event.title,start:s(e.event.start).format("00:00:00 YYYY-MM-d"),end:s(e.event.end).format("00:00:00 YYYY-MM-d")}).then(o=>{console.log(o.data.k)})},eventClick:(function(e){this.event_id=e.event.id,this.event_title=e.event.title,this.modal_text=this.$t("update_event"),this.creat_event=!1,this.updat_event=!0,this.visible=!0,this.start_event=s(e.event.start).format("YYYY-MM-DD"),this.end_event=s(e.event.end).format("YYYY-MM-DD"),console.log(this.start_event)}).bind(this),select:(function(e){console.log(e),this.event_title="",this.modal_text=this.$t("create_event"),this.creat_event=!0,this.updat_event=!1,this.visible=!0,console.log(e),this.start_event=s(e.start).format("YYYY-MM-DD"),this.end_event=s(e.end).format("YYYY-MM-DD"),console.log(e.backgroundColor)}).bind(this)}}},methods:{loo(){localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=v},goBack(){this.$router.go(-1)},deletevent(e){console.log(e),i.delete(`/api/calender/${this.event_id}/delete`).then(o=>{this.loading=!1,this.update()}),setTimeout(()=>{this.visible=!1,this.event_title=null,this.loading=!1},700)},updateevent(){i.post(`/api/calender/${this.event_id}/update`,{title:this.event_title,start:s(this.start_event).format(" YYYY-MM-d"),end:s(this.end_event).format(" YYYY-MM-d")}).then(e=>{}),this.update(),setTimeout(()=>{this.visible=!1,this.event_title=null,this.event_id=null,this.loading=!1},700)},createvent(){this.loading=!0,localStorage.getItem("type")==2&&(this.user_type=localStorage.getItem("user_id")),i.post("/api/calender/create",{user_id:this.user_type,title:this.event_title,start:this.start_event,end:this.end_event,time_start:this.time_start,time_end:this.time_end}).then(e=>{this.visible=!1,this.loading=!1,e.status!=200&&(this.valid=!0),this.update()}),setTimeout(()=>{this.event_title=null,this.start_event=null,this.end_event=null,this.create_visible=!1},700)},update(){i.post("/api/calender").then(e=>{console.log(e),this.opts.events=e.data.calender})},refreshEvents(){this.$refs.calendar.$emit("refetch-events")},fetchdoctor(){i.get("api/doctors").then(e=>{this.doctors=e.data.doctors,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})}},mounted(){this.fetchdoctor(),this.doctorshow=localStorage.getItem("type"),localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=v,console.log(localStorage.appLang),this.update(),console.log(this.opts)},watch:{"localStorage.appLang"(e){e=="en"?this.opts.locale="":this.opts.locale=v,this.update()}}},N={class:"mb-5 text-white"},U={class:"card flex justify-content-center"},H={key:0,class:"flex flex-column gap-2"},R={for:"username"},W={key:0,class:"mt-1 mb-5 text-red-500"},j={for:"time_start"},q={for:"time_end"};function A(e,o,J,z,t,a){const y=h("FullCalendar"),x=h("Dropdown"),_=h("Button"),C=h("Dialog");return n(),m("div",null,[l("div",N,[c(E,{height:"45",class:"mx-5 text-white",color:"#135c65",onClick:a.goBack},{default:b(()=>[c(F,{start:"",icon:"mdi-arrow-left"}),L(" "+u(e.$t("back")),1)]),_:1},8,["onClick"])]),c(y,{options:t.opts,onChange:o[0]||(o[0]=r=>a.refreshEvents()),ref:"fullCalendar"},null,8,["options"]),l("div",U,[c(C,{visible:t.visible,"onUpdate:visible":o[4]||(o[4]=r=>t.visible=r),id:"modal",modal:"",header:t.modal_text,style:{width:"60vw"}},{default:b(()=>{var r;return[l("form",null,[l("div",null,[t.doctorshow!=2?(n(),m("div",H,[l("label",R,u(e.$t("doctor")),1),c(x,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:t.user_type,"onUpdate:modelValue":o[1]||(o[1]=d=>t.user_type=d),"option-value":"id",filter:"",options:t.doctors,optionLabel:"name",placeholder:e.$t("doctor"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(r=e.error)!=null&&r.admin_id?(n(),m("div",W,u(e.error.admin_id[0]),1)):p("",!0)])):p("",!0),l("div",null,[l("label",j,u(e.$t("from")),1),Y(l("input",{type:"time",name:"time_start",id:"time_start","onUpdate:modelValue":o[2]||(o[2]=d=>t.time_start=d),style:{"border-radius":"5px"}},null,512),[[k,t.time_start]])]),l("div",null,[l("label",q,u(e.$t("to")),1),Y(l("input",{type:"time",name:"time_end",id:"time_end","onUpdate:modelValue":o[3]||(o[3]=d=>t.time_end=d),style:{"border-radius":"5px"}},null,512),[[k,t.time_end]])]),t.creat_event?(n(),f(_,{key:1,style:{"background-color":"rgb(4, 171, 4)",border:"0"},label:"Create ",loading:t.loading,onClick:a.createvent},null,8,["loading","onClick"])):p("",!0),t.updat_event?(n(),f(_,{key:2,style:{"background-color":"#6241f1","margin-left":"10px","margin-right":"10px",border:"0"},label:"update ",loading:t.loading,onClick:a.updateevent},null,8,["loading","onClick"])):p("",!0),t.updat_event?(n(),f(_,{key:3,style:{"background-color":"#b00020",border:"0"},label:"Delet ",loading:t.loading,onClick:a.deletevent},null,8,["loading","onClick"])):p("",!0)])])]}),_:1},8,["visible","header"])])])}const P=B(G,[["render",A],["__scopeId","data-v-24f4c4bc"]]);export{P as default};
