import{al as M,bA as N,ao as E,f as a,q as C,bB as U,aw as Y,bC as G,bD as Q,aG as D,az as F,as as T,aO as H,aA as L,aB as j,bE as z,F as I,bF as K,bG as q,aE as J,_ as W,a as X,H as Z,c as v,D as S,r as y,o as m,d as p,w as _,J as ee,h as te,t as u,$ as se,e as o,E as ae,g as $,z as A}from"./main-b4cc28b0.js";import{V as le}from"./VForm-acb5a7a5.js";import{V as ie}from"./VSheet-61027971.js";const B=M({name:"VRadio",props:{...N({falseIcon:"$radioOff",trueIcon:"$radioOn"})},setup(e,t){let{slots:d}=t;return E(()=>a(U,C(e,{class:"v-radio",type:"radio"}),d)),{}}});const oe=M({name:"VRadioGroup",inheritAttrs:!1,props:{height:{type:[Number,String],default:"auto"},...Y(),...G(Q(),["multiple"]),trueIcon:{type:D,default:"$radioOn"},falseIcon:{type:D,default:"$radioOff"},type:{type:String,default:"radio"}},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:d,slots:f}=t;const g=F(),r=T(()=>e.id||`radio-group-${g}`),h=H(e,"modelValue");return E(()=>{const[k,c]=L(d),[n,w]=j(e),[l,b]=z({...e,multiple:!1}),s=f.label?f.label({label:e.label,props:{for:r.value}}):e.label;return a(J,C({class:"v-radio-group"},k,n,{modelValue:h.value,"onUpdate:modelValue":i=>h.value=i,id:r.value}),{...f,default:i=>{let{id:V,messagesId:R,isDisabled:x,isReadonly:O}=i;return a(I,null,[s&&a(K,{id:V.value},{default:()=>[s]}),a(q,C(l,{id:V.value,"aria-describedby":R.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:x.value,readonly:O.value,"aria-labelledby":s?V.value:void 0},c,{modelValue:h.value,"onUpdate:modelValue":P=>h.value=P}),f)])}})}),{}}}),re={components:{InputText:X,Calendar:Z},data:()=>({valu:"",NameRules:[e=>e?!0:"This field is required"],title:"",skills:[],skill:{},answers:[],error:{},type:"success",snackbar:!0,load:!1,selected:[],children:[],selectBox:[],c:{},child_id:"",child:"",numberOfMonth:"",skip:[],headerAndQuestions:[],examDate:""}),methods:{fomate(){},goBack(){this.$router.go(-1)},getQuestions(){v.get(`/api/evaluations/${this.$route.params.id}`).then(e=>{this.headerAndQuestions=e.data.evaluation}),v.get(`/api/evaluations/${this.$route.params.id}/show`).then(e=>{this.title=e.data.evaluation.title})},async submit(){this.load=!0,setTimeout(()=>{this.load=!1},3e3);const{valid:e}=await this.$refs.form.validate();e&&(this.answers=[],this.selected.forEach((t,d)=>{this.answers.push({question_id:d,value:t})}),this.examDate=S(new Date).format("YYYY-MM-DD HH:mm"),v.post(`/api/evaluations/${this.$route.params.id}/submit`,{answers:this.answers,child_id:this.child_id,date:this.examDate,skills:this.skills}).then(t=>{t.data.status==200&&(this.child.childInMonths=-1,this.type="success")}).catch(t=>{this.error=t.data,this.type="error"}))},getChildren(){v.get("/api/child").then(e=>{this.selectBox=e.data.children,this.child_id=parseInt(localStorage.getItem("child_id")),this.getSpecificChildren()})},radioChange(e,t,d){let f=0;if(this.skip[t]==null)this.skip[t]=[{id:d,answer:e}];else{let c=this.skip[t];c.forEach(n=>{n.id==d&&(f++,n.answer=e)}),f||(c.push({id:d,answer:e}),this.skip[t]=c)}let g=0,r=0,h=-1,k=-1;Object.entries(this.skip).reverse().forEach(c=>{const[n,w]=c;h=k,k=n;for(const l of w)if(l.answer==1)g++;else{g=0;break}if(g?(this.headerAndQuestions[n].length==g&&r++,g=0):r=0,r==2){for(const l of Object.entries(this.headerAndQuestions)){const[b,s]=l;if(n==b)break;s.forEach(i=>{this.selected[i.questions.id]=1})}this.answers=[],this.selected.forEach((l,b)=>{this.answers.push({question_id:b,value:l})}),v.post(`/api/evaluations/${this.$route.params.id}/${h}/basalAge`,{answers:this.answers,child_id:this.child_id,date:this.examDate,skills:this.skills}).then(l=>{console.log(l.data.resultEvaluation)}),this.$router.push({name:"Children",params:{alert:1}})}})},getallskills(){v.get("/api/skills").then(e=>{this.skill=e.data.data})},getSpecificChildren(){v.get(`/api/child/${localStorage.getItem("child_id")}/${this.$route.params.id}`).then(e=>{console.log(e.data.child),e.data.child.canDoExam?(this.alert_text="",this.child=e.data.child):(this.alert_text="sorry this child has this evaluate lass than 6 months",this.type="error",this.child=e.data.child,this.child.childInMonths=-1)})}},mounted(){this.getQuestions(),this.getChildren(),this.getallskills(),this.examDate=S(new Date).format("YYYY-MM-DD HH:mm"),console.log(this.examDate)}},de={class:"text-center"},ne={class:"flex flex-column gap-2"},ue={for:"username"},he={key:0,class:"mt-1 mb-5 text-red-500"},ce={class:"grid grid-cols-1 lg:grid-cols-2 gap-5"},me={class:"flex flex-column gap-2 py-2"},pe={class:"w-full text-right",for:"username"},fe={key:0,class:"mt-1 mb-5 text-red-500"},ge={class:"flex flex-column gap-2 py-2"},be={class:"w-full text-right",for:"username"},ve={key:0,class:"mt-1 mb-5 text-red-500"},ke={key:0},Ve={class:"font-weight-bold mb-3 mx-7"},we={class:"border border-1 rounded pa-5"},ye={class:"mb-3"},_e=o("div",{class:"mb-7"},null,-1);function $e(e,t,d,f,g,r){const h=y("Dropdown"),k=y("Calendar"),c=y("MultiSelect"),n=y("Button");return m(),p("div",null,[a(se,{height:"45",class:"mb-5 text-white",color:"#A9AB7F",onClick:r.goBack},{default:_(()=>[a(ee,{start:"",icon:"mdi-arrow-left"}),te(" "+u(e.$t("back")),1)]),_:1},8,["onClick"]),a(ie,{"max-width":"1200",class:"mx-auto"},{default:_(()=>[o("h1",de,u(e.title),1),a(le,{"fast-fail":"",ref:"form",onSubmit:ae(r.submit,["prevent"]),class:"shadow-lg lg:p-[2%]"},{default:_(()=>{var w,l,b;return[o("div",ne,[o("label",ue,u(e.$t("child_name")),1),a(h,{disabled:"",filter:"",required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:e.child_id,"onUpdate:modelValue":t[0]||(t[0]=s=>e.child_id=s),"option-value":"id",options:e.selectBox,optionLabel:"name",placeholder:e.$t("child_name"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(w=e.error)!=null&&w.child_id?(m(),p("div",he,u(e.error.child_id[0]),1)):$("",!0)]),o("div",ce,[o("div",me,[o("label",pe,u(e.$t("created_at")),1),a(k,{style:{width:"100%"},modelValue:e.examDate,"onUpdate:modelValue":t[1]||(t[1]=s=>e.examDate=s),onChange:t[2]||(t[2]=s=>r.fomate()),"date-format":"dd-mm-yy",showIcon:"",rules:e.NameRules,"show-time":!0},null,8,["modelValue","rules"]),(l=e.error)!=null&&l.permissions?(m(),p("div",fe,u(e.error.permissions[0]),1)):$("",!0)]),o("div",ge,[o("label",be,u(e.$t("skill_add")),1),a(c,{modelValue:e.skills,"onUpdate:modelValue":t[3]||(t[3]=s=>e.skills=s),filter:"","option-value":"id",optionLabel:"name",options:e.skill,placeholder:e.$t("skill_add"),class:"w-full md:w-20rem"},null,8,["modelValue","options","placeholder"]),(b=e.error)!=null&&b.permissions?(m(),p("div",ve,u(e.error.permissions[0]),1)):$("",!0)])]),(m(!0),p(I,null,A(Object.values(e.headerAndQuestions).reverse(),s=>(m(),p("div",null,[s[0].min_age<=this.child.childInMonths?(m(),p("div",ke,[o("ul",null,[o("li",Ve,u(s[0].title),1)]),(m(!0),p(I,null,A(s,i=>(m(),p("div",we,[o("div",ye,u(i.questions.title),1),a(oe,{modelValue:e.selected[i.questions.id],"onUpdate:modelValue":V=>e.selected[i.questions.id]=V,onChange:V=>r.radioChange(e.selected[i.questions.id],i.questions.evaluation_header_id,i.questions.id),rules:e.NameRules},{default:_(()=>[a(B,{label:"True",value:"1"}),a(B,{label:"False",value:"0"})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","rules"])]))),256))])):$("",!0),_e]))),256)),a(n,{loading:e.load,type:"submit",class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["loading","label"])]}),_:1},8,["onSubmit"])]),_:1})])}const Se=W(re,[["render",$e]]);export{Se as default};
