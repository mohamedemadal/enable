import{aa as te,ab as le,T as u,ac as ae,a3 as oe,ad as se,r as v,ae as de,o as r,d as c,e as l,f as a,w as m,i as C,x as ne,t as d,h as D,g as p,c as h,D as ie}from"./main-5c230208.js";import{D as ue}from"./Deduction-436b4231.js";const re={class:"grid",style:{"overflow-x":"scroll"}},ce={class:"col-12"},me={class:"relative"},pe={style:{},class:"shadow-xl"},ve={class:"flex w-full justify-between align-items-center"},fe={class:"m-0 my-auto"},_e={class:"block mt-2 md:mt-0 p-input-icon-left"},he=l("i",{class:"pi pi-search"},null,-1),be={class:"flex align-items-center justify-content-center"},ye=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ge={key:0},we={class:"flex flex-column gap-2"},ke={style:{"text-align":"right !important"},for:"username"},$e={key:0,class:"mt-1 mb-5 text-red-500"},Ve={class:"flex flex-column gap-2"},xe={style:{"text-align":"right !important"},for:"username"},Ce={key:0,class:"mt-1 mb-5 text-red-500"},De={class:"flex flex-column gap-2"},Ue={style:{"text-align":"right !important"},class:"w-full",for:"username"},Be={key:0,class:"mt-1 mb-5 text-red-500"},Se={class:"flex flex-column gap-2"},Le={style:{"text-align":"right !important"},for:"username"},Ne={key:0,class:"mt-1 mb-5 text-red-500"},Te={class:"flex flex-column gap-2"},Me={style:{"text-align":"right !important"},class:"w-full",for:"username"},Pe={key:0,class:"mt-1 mb-5 text-red-500"},qe={class:"w-full text-center"},Ie={class:"flex flex-column gap-2"},je={style:{"text-align":"right !important"},for:"username"},Re={key:0,class:"mt-1 mb-5 text-red-500"},Ye={class:"flex flex-column gap-2"},Fe={style:{"text-align":"right !important"},for:"username"},Ae={key:0,class:"mt-1 mb-5 text-red-500"},ze={class:"flex flex-column gap-2"},Ee={style:{"text-align":"right !important"},class:"w-full",for:"username"},Oe={key:0,class:"mt-1 mb-5 text-red-500"},Ge={class:"flex flex-column gap-2"},He={style:{"text-align":"right !important"},for:"username"},Je={key:0,class:"mt-1 mb-5 text-red-500"},Ke={class:"flex flex-column gap-2"},Qe={style:{"text-align":"right !important"},class:"w-full",for:"username"},We={key:0,class:"mt-1 mb-5 text-red-500"},Xe={class:"w-full text-center"},lt={__name:"deduction",setup(Ze){const T=te();le();const M=u(""),U=u(!0),j=u({}),n=u(""),P=u(""),R=u(null);u(!1);const g=u(!1),B=u(""),Y=u(null),F=u(null),S=u({}),b=u(!1),o=u({}),y=u(!1);ae(()=>{W()});const L=()=>{h.get("/api/deduction-types").then(e=>{U.value=!1,M.value=e.data.data}),h.get("/api/deductions").then(e=>{U.value=!1,R.value=e.data.data}),h.get("/api/employees").then(e=>{P.value=e.data.data})};oe(()=>{L()});const E=e=>{h.get(`/api/deductions/${e}`).then(t=>{U.value=!1,o.value=t.data.data}),B.value=e,y.value=!y.value},O=()=>{h.put(`/api/deductions/${B.value}`,o.value).then(e=>{console.log(e.data),L(),y.value=!y.value,T.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),o.value=u({})}).catch(e=>{n.value=e.response.data.errors})},G=()=>{b.value=!b.value,o.value={}},H=e=>{console.log(e),g.value=!0,B.value=e},J=()=>{o.value.date=ie(o.value.dat).format("YYYY-MM-DD"),h.post("/api/deductions",o.value).then(e=>{console.log(e.data),L(),b.value=!b.value,T.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),o.value=u({})}).catch(e=>{n.value=e.response.data.errors})},K=()=>{h.delete(`/api/deduction-types/${B.value}`).then(e=>{console.log(e.data),g.value=!1,L(),T.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},Q=()=>{F.value.exportCSV()},W=()=>{S.value={global:{value:null,matchMode:se.CONTAINS}}};return(e,t)=>{const f=v("Button"),X=v("Toast"),q=v("InputText"),w=v("Column"),Z=v("DataTable"),I=v("Dialog"),N=v("Dropdown"),A=v("InputNumber"),z=v("Calendar"),ee=v("va-card"),k=de("can");return r(),c("div",re,[l("div",ce,[a(ee,{class:"card"},{default:m(()=>[l("div",me,[a(ue),C(a(f,{label:e.$t("deduction_add"),icon:"pi pi-plus",class:"p-button-success mr-2 absolute top-3",onClick:G},null,8,["label"]),[[k,"skills create"]]),C(a(f,{label:e.$t("export"),icon:"pi pi-upload",class:"export absolute top-3 ltr:left-[15%] rtl:right-[15%]",onClick:t[0]||(t[0]=s=>Q(s))},null,8,["label"]),[[k,"skills list"]])]),a(X),l("div",pe,[C((r(),ne(Z,{ref_key:"dt",ref:F,selection:Y.value,"onUpdate:selection":t[2]||(t[2]=s=>Y.value=s),value:R.value,loading:U.value,"data-key":"id",paginator:!0,rows:10,filters:S.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:m(()=>[l("div",ve,[l("h5",fe,d(e.$t("deductions")),1),l("div",null,[l("span",_e,[he,a(q,{modelValue:S.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=s=>S.value.global.value=s),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:m(()=>[a(w,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(w,{field:"employee.name",header:e.$t("employee_name"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:m(s=>[D(d(s.data.employee.name),1)]),_:1},8,["header"]),a(w,{field:"deduction_type.title",header:e.$t("deduction_type"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:m(s=>[D(d(s.data.deduction_type.title),1)]),_:1},8,["header"]),a(w,{field:"amount",header:e.$t("deduction_mount"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:m(s=>[D(d(s.data.amount),1)]),_:1},8,["header"]),a(w,{"header-style":"min-width:10rem;"},{body:m(s=>[l("div",null,[C(a(f,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:_=>E(s.data.id)},null,8,["onClick"]),[[k,"skills edit"]]),C(a(f,{icon:"pi pi-trash",class:"delete mt-2",onClick:_=>H(s.data.id)},null,8,["onClick"]),[[k,"skills delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[k,"skills list"]]),a(I,{visible:g.value,"onUpdate:visible":t[4]||(t[4]=s=>g.value=s),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:m(()=>[a(f,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=s=>g.value=!1)},null,8,["label"]),a(f,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:K},null,8,["label"])]),default:m(()=>[l("div",be,[ye,j.value?(r(),c("span",ge,[D(d(e.$t("remove_item"))+" ",1),l("b",null,d(j.value.first_name),1),D("?")])):p("",!0)])]),_:1},8,["visible","header"]),a(I,{visible:b.value,"onUpdate:visible":t[10]||(t[10]=s=>b.value=s),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:m(()=>{var s,_,$,V,x;return[l("div",we,[l("label",ke,d(e.$t("employee_name")),1),a(N,{required:"",id:"pv_id_1",modelValue:o.value.employee_id,"onUpdate:modelValue":t[5]||(t[5]=i=>o.value.employee_id=i),"option-value":"id",filter:"",options:P.value,optionLabel:"name",placeholder:e.$t("employee_name"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(s=n.value)!=null&&s.employee_id?(r(),c("div",$e,d(n.value.employee_id[0]),1)):p("",!0)]),l("div",Ve,[l("label",xe,d(e.$t("deduction_type")),1),a(N,{required:"",id:"pv_id_1",modelValue:o.value.deduction_type_id,"onUpdate:modelValue":t[6]||(t[6]=i=>o.value.deduction_type_id=i),"option-value":"id",filter:"",options:M.value,optionLabel:"title",placeholder:e.$t("deduction_type"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(_=n.value)!=null&&_.deduction_type_id?(r(),c("div",Ce,d(n.value.deduction_type_id[0]),1)):p("",!0)]),l("div",De,[l("label",Ue,d(e.$t("deduction_mount")),1),a(A,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:o.value.amount,"onUpdate:modelValue":t[7]||(t[7]=i=>o.value.amount=i),placeholder:e.$t("deduction_mount")},null,8,["modelValue","placeholder"]),($=n.value)!=null&&$.amount?(r(),c("div",Be,d(n.value.amount[0]),1)):p("",!0)]),l("div",Se,[l("label",Le,d(e.$t("deduction_date")),1),a(z,{style:{width:"100%"},showButtonBar:"",modelValue:o.value.date,"onUpdate:modelValue":t[8]||(t[8]=i=>o.value.date=i),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("deduction_date")},null,8,["modelValue","placeholder"]),(V=n.value)!=null&&V.date?(r(),c("div",Ne,d(n.value.date[0]),1)):p("",!0)]),l("div",Te,[l("label",Me,d(e.$t("deduction_reason")),1),a(q,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:o.value.reason,"onUpdate:modelValue":t[9]||(t[9]=i=>o.value.reason=i),placeholder:e.$t("deduction_reason")},null,8,["modelValue","placeholder"]),(x=n.value)!=null&&x.reason?(r(),c("div",Pe,d(n.value.reason[0]),1)):p("",!0)]),l("div",qe,[a(f,{onClick:J,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),a(I,{visible:y.value,"onUpdate:visible":t[16]||(t[16]=s=>y.value=s),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:m(()=>{var s,_,$,V,x;return[l("div",Ie,[l("label",je,d(e.$t("employee_name")),1),a(N,{required:"",id:"pv_id_1",modelValue:o.value.employee_id,"onUpdate:modelValue":t[11]||(t[11]=i=>o.value.employee_id=i),"option-value":"id",filter:"",options:P.value,optionLabel:"name",placeholder:e.$t("employee_name"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(s=n.value)!=null&&s.employee_id?(r(),c("div",Re,d(n.value.employee_id[0]),1)):p("",!0)]),l("div",Ye,[l("label",Fe,d(e.$t("deduction_type")),1),a(N,{required:"",id:"pv_id_1",modelValue:o.value.deduction_type_id,"onUpdate:modelValue":t[12]||(t[12]=i=>o.value.deduction_type_id=i),"option-value":"id",filter:"",options:M.value,optionLabel:"title",placeholder:e.$t("deduction_type"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(_=n.value)!=null&&_.deduction_type_id?(r(),c("div",Ae,d(n.value.deduction_type_id[0]),1)):p("",!0)]),l("div",ze,[l("label",Ee,d(e.$t("deduction_mount")),1),a(A,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:o.value.amount,"onUpdate:modelValue":t[13]||(t[13]=i=>o.value.amount=i),placeholder:e.$t("deduction_mount")},null,8,["modelValue","placeholder"]),($=n.value)!=null&&$.amount?(r(),c("div",Oe,d(n.value.amount[0]),1)):p("",!0)]),l("div",Ge,[l("label",He,d(e.$t("deduction_date")),1),a(z,{style:{width:"100%"},showButtonBar:"",modelValue:o.value.date,"onUpdate:modelValue":t[14]||(t[14]=i=>o.value.date=i),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("deduction_date")},null,8,["modelValue","placeholder"]),(V=n.value)!=null&&V.date?(r(),c("div",Je,d(n.value.date[0]),1)):p("",!0)]),l("div",Ke,[l("label",Qe,d(e.$t("deduction_reason")),1),a(q,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:o.value.reason,"onUpdate:modelValue":t[15]||(t[15]=i=>o.value.reason=i),placeholder:e.$t("deduction_reason")},null,8,["modelValue","placeholder"]),(x=n.value)!=null&&x.reason?(r(),c("div",We,d(n.value.reason[0]),1)):p("",!0)]),l("div",Xe,[a(f,{onClick:O,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{lt as default};
