import{_ as U,H as j,aa as B,bf as N,T as V,c as a,D as h,r as f,o as r,d as n,e as l,t as o,g as d,f as i,w as p,X as Y,a5 as I,h as k,a2 as q,a7 as R,$ as A,E as G,F as w,z as O,x as S,Q as P,R as H}from"./main-95b9983d.js";import{F as W,i as z,a as K,b as Q,c as X,l as D}from"./ar-dcd535cf.js";import{V as J}from"./VDialog-c4131959.js";import{V as Z}from"./VForm-5bb215a7.js";const $={components:{FullCalendar:W,Calendar:j},data(){return{doctors:{},admin_id:"",deleteDialog:!1,setiontype:"",programes:{},child:{},rooms:{},error:{},doctors:{},isSubmitting:!1,programe_type:{},toast:B(),room_id:"",slot_id:"",student:{},capasityboj:{},capasity:[],maxcapsity:"",treaments:{},time_sloteobj:{},time_slots:[],time_slotename:[],buttomaddcal:!0,timeshow:!1,FullCalendarshow:!1,langStore:N(),visible:!1,create_visible:!1,event_id:null,creat_event:V(!1),updat_event:V(!1),event_title:"",start_event:"",end_event:"",loading:!1,modal_text:"",time_start:"",time_end:"",refmaxcapsity:"",opts:{plugins:[z,K,Q,X],initialView:"dayGridMonth",footerToolbar:!0,valid:!1,buttonIcons:!1,locale:null,validRange:{start:new Date},selectable:!0,droppable:!1,editable:!0,selectHelper:!0,validRange:{start:new Date},headerToolbar:{center:"prev next today",left:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},eventsTimeFormat:{hour:"2-digit",minute:"2-digit",second:"2-digit"},eventDrop:function(e){console.log(e.event.id),a.post(`/api/calender/${e.event.id}/update`,{start:e.event.start,end:e.event.end}).then(t=>{console.log(t.data.k)})},eventDrop:function(e){a.post(`/api/calender/${e.event.id}/update`,{title:e.event.title,start:h(e.event.start).format("00:00:00 YYYY-MM-d"),end:h(e.event.end).format("00:00:00 YYYY-MM-d")}).then(t=>{console.log(t.data.k)})},eventClick:(function(e){this.event_id=e.event.id,this.event_title=e.event.title,this.modal_text=this.$t("update_event"),this.creat_event=!1,this.updat_event=!0,this.handleEventClick(e),this.time_slotename.push(e.event.title),console.log(this.time_slotename),this.start_event=h(e.event.start).format("YYYY-MM-DD"),this.end_event=h(e.event.end).format("YYYY-MM-DD"),console.log(this.start_event)}).bind(this),select:(function(e){console.log(e),this.event_title="",this.modal_text=this.$t("create_event"),this.creat_event=!0,this.updat_event=!1,this.visible=!0,console.log(e),this.start_event=h(e.start).format("YYYY-MM-DD"),this.end_event=h(e.end).format("YYYY-MM-DD"),console.log(e.backgroundColor)}).bind(this)}}},methods:{getAllDocto(){a.get("api/doctors").then(e=>{this.doctors=e.data.doctors,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},handleEventClick(e){this.deleteDialog=!this.deleteDialog,console.log(e);const t=e.event;console.log(t),t.setProp("backgroundColor","green"),t.setProp("visibility","hidden")},Therapeutic(){this.$router.push({name:"student-programe"})},programetype(){return this.roomType=[{name:this.$t("diurnal"),value:0},{name:this.$t("Clinics"),value:1},{name:this.$t("house"),value:2}]},deletearray(){this.capasity.length=[],this.maxcapsity=this.refmaxcapsity},addarray(){a.get(`/api/treatment/${this.student.Type}`).then(e=>{this.capasityboj={treatment_id:this.student.Type,sessions_number:this.student.sessions_number,name:e.data.data.name},this.capasity.push(this.capasityboj),this.maxcapsity=this.maxcapsity-this.student.sessions_number,this.student.sessions_number=""}),console.log(this.capasity)},getprograme(e){this.capasity=[],this.student.sessions_number="",a.get(`/api/program/${this.student.program_id}`).then(t=>{this.refmaxcapsity=t.data.data.individual_sessions,this.maxcapsity=t.data.data.individual_sessions,this.setiontype=t.data.data.session_type}),a.get(`api/users/filter/${e}`).then(t=>{this.doctors=t.data.data}),a.get(`api/slot/filter/${e}`).then(t=>{this.opts.events=t.data.data.map(m=>({title:m.start_event+"T"+m.to,start:m.start_event+"T"+m.from,end:m.end_event+"T"+m.to,id:m.id,from:m.from}))})},getalltreatement(){a.get("api/treatment/all").then(e=>{this.treaments=e.data.data,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},getallchild(){a.get("api/child").then(e=>{this.child=e.data.children,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},pushtimeslot(e){console.log(e),this.time_sloteobj={time_slot_id:this.event_id,doctor_id:e}},addtimedoctor(){console.log(this.time_sloteobj),this.time_slots.push(this.time_sloteobj),this.deleteDialog=!this.deleteDialog},cansel(){this.pushtimeslot(),this.addtimedoctor()},getallprogrames(){a.get("api/program").then(e=>{this.programes=e.data.data,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},createtreatment(){a.post("/api/student-program",{program_id:this.student.program_id,student_id:this.student.student_id,details:this.capasity,time_slots:this.time_slots}).then(e=>{this.$toast.add({severity:"success",summary:"Success Message",detail:"Success",life:3e3})}).catch(e=>{this.timeshow=!this.timeshow,console.log(e.response.data.errors.name),this.error=e.response.data.errors})},closeSuccessModal(){this.isSuccessModalOpen=!1},highlightSelectedDay(e){this.$store.state.calendar.selectedDay===e.dateStr&&e.el.classList.add("selected-day")},loo(){localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=D},goBack(){this.$router.go(-1)},deletevent(e){console.log(e),a.delete(`/api/calender/${this.event_id}/delete`).then(t=>{}),this.update(),setTimeout(()=>{this.visible=!1,this.event_title=null,this.loading=!1},700)},updateevent(){a.post(`/api/calender/${this.event_id}/update`,{title:this.event_title,start:h(this.start_event).format(" YYYY-MM-d"),end:h(this.end_event).format(" YYYY-MM-d")}).then(e=>{}),setTimeout(()=>{this.visible=!1,this.event_title=null,this.event_id=null,this.loading=!1},700)},createvent(){this.loading=!0,a.post("/api/slot",{title:this.event_title,date:this.start_event,from:this.time_start,to:this.time_end,room_id:this.room_id}).then(e=>{this.$toast.add({severity:"success",summary:"Success Message",detail:"Success",life:3e3}),this.visible=!1,e.status!=200&&(this.valid=!0)}).catch(e=>{this.error=e.response.data.errors}),setTimeout(()=>{this.update(),this.event_title=null,this.start_event=null,this.end_event=null,this.create_visible=!1,this.loading=!1},2e3)},update(){a.get("/api/slot/student-program").then(e=>{console.log(e.data.data),this.opts.events=e.data.data.map(t=>({title:t.start_event+"T"+t.to,start:t.start_event+"T"+t.from,end:t.end_event+"T"+t.to,id:t.id,from:t.from}))})},refreshEvents(){this.$refs.calendar.$emit("refetch-events")}},mounted(){this.getallprogrames(),this.getallchild(),this.getalltreatement(),localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=D,console.log(localStorage.appLang),console.log(this.opts)},watch:{"langStore.appLang"(e){e=="en"?this.opts.locale="":this.opts.locale=D,this.update()}}},T=e=>(P("data-v-f7b4cb4d"),e=e(),H(),e),ee={class:"text-xl p-4 text-[#135C65] cursor-pointer font-bold"},te={key:0,class:"loader"},se={class:"flex flex-column gap-2"},oe={for:"username"},le={key:0,class:"mt-1 mb-5 text-red-500"},ie={class:"flex flex-column gap-2"},ae={for:"username"},re={key:0,class:"mt-1 mb-5 text-red-500"},ne={key:0,class:"flex flex-column gap-2"},de={for:"username"},ce={key:0,class:"mt-1 mb-5 text-red-500"},ue={key:1,class:"flex flex-column gap-2"},me={for:"username"},pe={class:"flex"},he={key:0,class:"mt-1 mb-5 text-red-500"},_e={class:"p-[2%] bg-[#FDFDFD] grid grid-cols-1 lg:grid-cols-2 gap-4"},ge={class:"px-[2%] py-1 flex"},fe={class:"px-4"},ve={key:0,class:"mt-1 mb-5 text-red-500"},be=T(()=>l("div",{class:"card flex justify-content-center"},null,-1)),ye={class:"flex flex-column gap-2 w-full"},ke=T(()=>l("small",{id:"username-help"},null,-1)),De={class:"flex flex-column gap-2"},xe={for:"username"},Ce={key:0,class:"mt-1 mb-5 text-red-500"};function Ve(e,t,m,Ye,s,c){const y=f("Dropdown"),M=f("InputNumber"),v=f("Button"),F=f("Toast"),E=f("FullCalendar"),L=f("Dialog");return r(),n(w,null,[l("div",null,[l("div",null,[l("p",ee,o(e.$t("add_sp")),1)]),s.loading?(r(),n("div",te)):d("",!0)]),i(Y,null,{default:p(()=>{var _;return[l("div",null,[i(J,{modelValue:e.isSuccessModalOpen,"onUpdate:modelValue":t[0]||(t[0]=u=>e.isSuccessModalOpen=u),"max-width":"400px"},{default:p(()=>[i(Y,null,{default:p(()=>[i(I,null,{default:p(()=>[k(o(e.$t("Success!")),1)]),_:1}),i(q,null,{default:p(()=>[k(o(e.$t("Data seeded successfully!")),1)]),_:1}),i(R,null,{default:p(()=>[i(A,{onClick:c.closeSuccessModal,color:"success"},{default:p(()=>[k(o(e.$t("OK")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(Z,{class:"p-[2%] bg-[#FDFDFD] grid grid-cols-1 lg:grid-cols-2 gap-4",ref:"myForm",onSubmit:G(e.seedData,["prevent"])},{default:p(()=>{var u,b,x,C;return[l("div",se,[l("label",oe,o(e.$t("ProgramName")),1),i(y,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.program_id,"onUpdate:modelValue":[t[1]||(t[1]=g=>s.student.program_id=g),c.getprograme],"option-value":"id",filter:"",options:s.programes,optionLabel:"name",placeholder:e.$t("ProgramName"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","onUpdate:modelValue","options","placeholder"]),(u=s.error)!=null&&u.program_id?(r(),n("div",le,o(s.error.program_id[0]),1)):d("",!0)]),l("div",ie,[l("label",ae,o(e.$t("child_name")),1),i(y,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.student_id,"onUpdate:modelValue":[t[2]||(t[2]=g=>s.student.student_id=g),e.getAllDoctor],"option-value":"id",filter:"",options:s.child,optionLabel:"name",placeholder:e.$t("child_name"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","onUpdate:modelValue","options","placeholder"]),(b=s.error)!=null&&b.student_id?(r(),n("div",re,o(s.error.student_id[0]),1)):d("",!0)]),s.student.program_id&&s.maxcapsity>0&&s.setiontype!=1?(r(),n("div",ne,[l("label",de,o(e.$t("Typetreatment"))+"-",1),i(y,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.Type,"onUpdate:modelValue":t[3]||(t[3]=g=>s.student.Type=g),"option-value":"id",filter:"",options:s.treaments,optionLabel:"name",placeholder:e.$t("Typetreatment"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(x=s.error)!=null&&x.details?(r(),n("div",ce,o(s.error.details[0]),1)):d("",!0)])):d("",!0),s.student.program_id&&s.maxcapsity>0&&s.setiontype!=1?(r(),n("div",ue,[l("label",me,o(e.$t("Sn"))+" ("+o(s.maxcapsity)+")",1),l("div",pe,[i(M,{max:s.maxcapsity,min:1,required:"",class:"bg-[#f7f5f5] w-[90%]",modelValue:s.student.sessions_number,"onUpdate:modelValue":t[4]||(t[4]=g=>s.student.sessions_number=g),placeholder:e.$t("Sn")},null,8,["max","modelValue","placeholder"]),i(v,{onClick:c.addarray,class:"create m-auto s",icon:"pi pi-plus"},null,8,["onClick"])]),(C=s.error)!=null&&C.details?(r(),n("div",he,o(s.error.details[0]),1)):d("",!0)])):d("",!0)]}),_:1},8,["onSubmit"]),l("div",_e,[l("div",ge,[l("ol",null,[(r(!0),n(w,null,O(s.capasity,(u,b)=>(r(),n("li",{key:b},o(b+1)+" - "+o(u.name)+" - "+o(e.$t("Sn"))+" - "+o(u.sessions_number),1))),128))])]),s.capasity!=""?(r(),S(v,{key:0,onClick:c.deletearray,class:"delete m-auto s",icon:"pi pi-pencil"},null,8,["onClick"])):d("",!0)]),i(F),l("div",fe,[i(E,{options:s.opts,onChange:t[5]||(t[5]=u=>c.refreshEvents()),ref:"fullCalendar",dayRender:c.highlightSelectedDay},null,8,["options","dayRender"]),(_=s.error)!=null&&_.time_slots?(r(),n("div",ve,o(s.error.time_slots[0]),1)):d("",!0),be,l("div",ye,[s.buttomaddcal?(r(),S(v,{key:0,onClick:c.createtreatment,class:"create m-auto w-full lg:w-[50%]",label:e.$t("submit")},null,8,["onClick","label"])):d("",!0),ke])])])]}),_:1}),i(L,{visible:s.deleteDialog,"onUpdate:visible":t[7]||(t[7]=_=>s.deleteDialog=_),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:p(()=>{var _;return[l("div",De,[l("label",xe,o(e.$t("doctor")),1),i(y,{"onUpdate:modelValue":[c.pushtimeslot,t[6]||(t[6]=u=>s.admin_id=u)],required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.admin_id,"option-value":"id",filter:"",options:s.doctors,optionLabel:"name",placeholder:e.$t("doctor"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["onUpdate:modelValue","modelValue","options","placeholder"]),(_=s.error)!=null&&_.admin_id?(r(),n("div",Ce,o(s.error.admin_id[0]),1)):d("",!0),i(v,{onClick:c.addtimedoctor,class:"create m-auto w-full lg:w-[50%]",label:e.$t("submit")},null,8,["onClick","label"])]),i(v,{onClick:c.cansel,style:{position:"absolute",top:"15px",right:"15px"},icon:"pi pi-times",severity:"danger",rounded:"","aria-label":"Cancel"},null,8,["onClick"])]}),_:1},8,["visible","header"])],64)}const Fe=U($,[["render",Ve],["__scopeId","data-v-f7b4cb4d"]]);export{Fe as default};
