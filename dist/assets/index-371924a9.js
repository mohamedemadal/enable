import{aa as de,T as r,ac as ue,as as re,a3 as ce,ad as ve,r as h,ae as pe,o as c,d as v,e as o,f as t,w as u,t as s,h as y,i as me,g as p,U as I,c as $,D as W}from"./main-95b9983d.js";import{E as H,P as Z}from"./index-305b36a4.js";const fe={class:"grid",style:{"overflow-x":"scroll"}},he={class:"col-12"},ge={class:"card"},be={class:"my-2"},_e={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ye={class:"m-0"},ke={class:"block mt-2 md:mt-0 p-input-icon-left"},we=o("i",{class:"pi pi-search"},null,-1),Ve={class:"flex align-items-center justify-content-center"},$e=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),xe={key:0},Ce={class:"flex flex-column gap-2"},Ue={class:"w-full text-right",for:"username"},De={key:0,class:"mt-1 mb-5 text-red-500"},Se={class:"flex flex-column gap-2"},qe={class:"w-full text-right",for:"username"},Me={key:0,class:"mt-1 mb-5 text-red-500"},Fe={class:"flex flex-column gap-2"},Be={class:"w-full text-right",for:"username "},Pe={key:0,class:"mt-1 mb-5 text-red-500"},Te={class:"flex flex-column gap-2"},Ie={class:"w-full text-right",for:"username"},Le={key:0,class:"mt-1 mb-5 text-red-500"},Ne={class:"flex flex-column gap-2"},Ee={class:"w-full text-right",for:"username"},Ye={key:0,class:"mt-1 mb-5 text-red-500"},Re={class:"flex flex-column gap-2"},je={class:"w-full text-right",for:"username"},ze={key:0,class:"mt-1 mb-5 text-red-500"},Ae={class:"flex flex-column gap-2"},Oe={class:"w-full text-right",for:"username"},We={key:0,class:"mt-1 mb-5 text-red-500"},He={class:"py-3"},Ze={class:"flex flex-column gap-2"},Je={class:"w-full text-right",for:"username"},Ke={key:0,class:"mt-1 mb-5 text-red-500"},Qe={class:"flex flex-column gap-2"},Ge={class:"w-full text-right",for:"username"},Xe={key:0,class:"mt-1 mb-5 text-red-500"},el={class:"flex flex-column gap-2"},ll={class:"w-full text-right",for:"username "},tl={key:0,class:"mt-1 mb-5 text-red-500"},al={class:"flex flex-column gap-2"},ol={class:"w-full text-right",for:"username"},sl={key:0,class:"mt-1 mb-5 text-red-500"},nl={class:"flex flex-column gap-2"},il={class:"w-full text-right",for:"username"},dl={key:0,class:"mt-1 mb-5 text-red-500"},ul={class:"flex flex-column gap-2"},rl={class:"w-full text-right",for:"username"},cl={key:0,class:"mt-1 mb-5 text-red-500"},vl={class:"flex flex-column gap-2"},pl={class:"w-full text-right",for:"username"},ml={key:0,class:"mt-1 mb-5 text-red-500"},fl={class:"py-3"},_l={__name:"index",setup(hl){const E=de(),a=r({long:"",lat:"",assigners:[]}),Y=r(!0),R=r({}),n=r(""),j=r(null),M=r(""),k=r(!1);r(!1);const z=r(null),F=r({});r(!1);const _=r(!1),w=r(!1),L=r([]);r({lat:10,lng:10});const m=r({name:"",latitude:31.984983325941823,longitude:35.900908045672196,distance:1e3});ue(()=>{te()}),re(()=>(console.log(m.value.distance),{center:{lat:m.value.latitude,lng:m.value.longitude},radius:parseInt(m.value.distance),strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}));function A(e){const l=e.latLng,g=l.lat(),f=l.lng();a.value.lat=g,a.value.long=f,console.log("Clicked coordinates:",g,f)}const B=()=>{$.get("/api/official-leaves").then(e=>{Y.value=!1,j.value=e.data.data}),$.get("/api/employees").then(e=>{L.value=e.data.data})},J=e=>{M.value=e,_.value=!_.value},K=()=>{$.delete(`/api/official-leaves/${M.value}`).then(e=>{B(),_.value=!_.value})},Q=()=>{w.value=!w.value},G=()=>{a.value.end=W(a.value.end).format("YYYY-MM-DD HH:mm:ss"),a.value.start=W(a.value.start).format("YYYY-MM-DD HH:mm:ss"),$.post("api/official-leaves",a.value).then(e=>{B(),w.value=!w.value,E.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(e=>{n.value=e.response.data.errors})},X=e=>{M.value=e,k.value=!k.value,$.get(`/api/official-leaves/${e}`).then(l=>{a.value.title=l.data.data.title,a.value.location=l.data.data.location,a.value.lat=l.data.data.lat,a.value.long=l.data.data.long,a.value.start=l.data.data.start,a.value.end=l.data.data.end,m.value.latitude=l.data.data.lat,m.value.longitude=l.data.data.long;for(let g=0;g<l.data.data.assigners.length;g++)a.value.assigners.push(l.data.data.assigners[g].employee_id)})},ee=()=>{$.put(`api/official-leaves/${M.value}`,a.value).then(e=>{B(),k.value=!k.value,E.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(e=>{n.value=e.response.data.errors})};ce(()=>{B()});const le=()=>{z.value.exportCSV()},te=()=>{F.value={global:{value:null,matchMode:ve.CONTAINS}}};return(e,l)=>{const g=h("Toast"),f=h("Button"),ae=h("Toolbar"),x=h("InputText"),oe=h("ProgressSpinner"),V=h("Column"),se=h("router-link"),ne=h("DataTable"),N=h("Dialog"),P=h("Calendar"),O=h("MultiSelect"),T=h("InputNumber"),ie=pe("can");return c(),v("div",fe,[o("div",he,[o("div",ge,[t(g),t(ae,{class:"mb-4"},{start:u(()=>[o("div",be,[t(f,{label:e.$t("add_official_leaves"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:Q},null,8,["label"])])]),end:u(()=>[t(f,{label:e.$t("export"),icon:"pi pi-upload",class:"p-button-help",onClick:l[0]||(l[0]=i=>le(i))},null,8,["label"])]),_:1}),t(ne,{ref_key:"dt",ref:z,loading:Y.value,value:j.value,selection:e.selectedUsers,"onUpdate:selection":l[2]||(l[2]=i=>e.selectedUsers=i),paginator:!0,rows:10,filters:F.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} users",responsiveLayout:"scroll"},{header:u(()=>[o("div",_e,[o("h5",ye,s(e.$t("official_leaves")),1),o("span",ke,[we,t(x,{modelValue:F.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=i=>F.value.global.value=i),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])]),empty:u(()=>[y(" No official leaves found.")]),loading:u(()=>[t(oe)]),default:u(()=>[t(V,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(V,{field:"title",header:e.$t("title"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:u(i=>[y(s(i.data.title),1)]),_:1},8,["header"]),t(V,{field:"location",header:e.$t("location"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:u(i=>[y(s(i.data.location),1)]),_:1},8,["header"]),t(V,{field:"Start Date",header:e.$t("start_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:u(i=>[y(s(i.data.start),1)]),_:1},8,["header"]),t(V,{field:"End Date",header:e.$t("end_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:u(i=>[y(s(i.data.end),1)]),_:1},8,["header"]),t(V,{headerStyle:"min-width:10rem;"},{body:u(i=>[t(se,{to:{type:Object,required:!0},onClick:b=>e.showUser(i.data)},null,8,["onClick"]),t(f,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:b=>X(i.data.id)},null,8,["onClick"]),me(t(f,{icon:"pi pi-trash",class:"delete mt-2",onClick:b=>J(i.data.id)},null,8,["onClick"]),[[ie,"skills delete"]])]),_:1})]),_:1},8,["loading","value","selection","filters"]),t(N,{visible:_.value,"onUpdate:visible":l[4]||(l[4]=i=>_.value=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:u(()=>[t(f,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[3]||(l[3]=i=>_.value=!1)},null,8,["label"]),t(f,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:K},null,8,["label"])]),default:u(()=>[o("div",Ve,[$e,R.value?(c(),v("span",xe,[y(s(e.$t("remove_item"))+" ",1),o("b",null,s(R.value.first_name),1),y("?")])):p("",!0)])]),_:1},8,["visible"]),t(N,{visible:w.value,"onUpdate:visible":l[12]||(l[12]=i=>w.value=i),style:{width:"550px"},header:e.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{footer:u(()=>[t(f,{label:e.$t("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e.hideDialogRequest},null,8,["label","onClick"]),t(f,{label:e.$t("save"),icon:"pi pi-check",class:"p-button-text",onClick:G},null,8,["label"])]),default:u(()=>{var i,b,C,U,D,S,q;return[o("div",Ce,[o("label",Ue,s(e.$t("title")),1),t(x,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:a.value.title,"onUpdate:modelValue":l[5]||(l[5]=d=>a.value.title=d),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(i=n.value)!=null&&i.title?(c(),v("div",De,s(n.value.title[0]),1)):p("",!0)]),o("div",Se,[o("label",qe,s(e.$t("location")),1),t(x,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:a.value.location,"onUpdate:modelValue":l[6]||(l[6]=d=>a.value.location=d),placeholder:e.$t("location")},null,8,["modelValue","placeholder"]),(b=n.value)!=null&&b.location?(c(),v("div",Me,s(n.value.location[0]),1)):p("",!0)]),o("div",Fe,[o("label",Be,s(e.$t("start_date")),1),t(P,{style:{width:"100%"},showButtonBar:"",modelValue:a.value.start,"onUpdate:modelValue":l[7]||(l[7]=d=>a.value.start=d),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("start_date")},null,8,["modelValue","placeholder"]),(C=n.value)!=null&&C.start?(c(),v("div",Pe,s(n.value.start[0]),1)):p("",!0)]),o("div",Te,[o("label",Ie,s(e.$t("end_date")),1),t(P,{style:{width:"100%"},showButtonBar:"",modelValue:a.value.end,"onUpdate:modelValue":l[8]||(l[8]=d=>a.value.end=d),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("end_date")},null,8,["modelValue","placeholder"]),(U=n.value)!=null&&U.end?(c(),v("div",Le,s(n.value.end[0]),1)):p("",!0)]),o("div",Ne,[o("label",Ee,s(e.$t("Employees")),1),t(O,{filter:"",required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:a.value.assigners,"onUpdate:modelValue":l[9]||(l[9]=d=>a.value.assigners=d),"option-value":"id",options:L.value,optionLabel:"name",placeholder:e.$t("Employees"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(D=n.value)!=null&&D.assigners?(c(),v("div",Ye,s(n.value.assigners[0]),1)):p("",!0)]),o("div",Re,[o("label",je,s(e.$t("lat")),1),t(T,{required:"",class:"bg-[#f7f5f5]",modelValue:a.value.lat,"onUpdate:modelValue":l[10]||(l[10]=d=>a.value.lat=d),placeholder:e.$t("lat")},null,8,["modelValue","placeholder"]),(S=n.value)!=null&&S.lat?(c(),v("div",ze,s(n.value.lat[0]),1)):p("",!0)]),o("div",Ae,[o("label",Oe,s(e.$t("long")),1),t(T,{required:"",class:"bg-[#f7f5f5]",modelValue:a.value.long,"onUpdate:modelValue":l[11]||(l[11]=d=>a.value.long=d),placeholder:e.$t("long")},null,8,["modelValue","placeholder"]),(q=n.value)!=null&&q.long?(c(),v("div",We,s(n.value.long[0]),1)):p("",!0)]),o("div",He,[t(I(H),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:A,style:{width:"100%",height:"500px"},center:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)},zoom:14},{default:u(()=>[t(I(Z),{options:{position:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])])]}),_:1},8,["visible","header"]),t(N,{visible:k.value,"onUpdate:visible":l[20]||(l[20]=i=>k.value=i),style:{width:"450px"},header:e.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{footer:u(()=>[t(f,{label:e.$t("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e.hideDialogRequest},null,8,["label","onClick"]),t(f,{label:e.$t("save"),icon:"pi pi-check",class:"p-button-text",onClick:ee},null,8,["label"])]),default:u(()=>{var i,b,C,U,D,S,q;return[o("div",Ze,[o("label",Je,s(e.$t("title")),1),t(x,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:a.value.title,"onUpdate:modelValue":l[13]||(l[13]=d=>a.value.title=d),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(i=n.value)!=null&&i.title?(c(),v("div",Ke,s(n.value.title[0]),1)):p("",!0)]),o("div",Qe,[o("label",Ge,s(e.$t("location")),1),t(x,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:a.value.location,"onUpdate:modelValue":l[14]||(l[14]=d=>a.value.location=d),placeholder:e.$t("location")},null,8,["modelValue","placeholder"]),(b=n.value)!=null&&b.location?(c(),v("div",Xe,s(n.value.location[0]),1)):p("",!0)]),o("div",el,[o("label",ll,s(e.$t("start_date")),1),t(P,{style:{width:"100%"},showButtonBar:"",modelValue:a.value.start,"onUpdate:modelValue":l[15]||(l[15]=d=>a.value.start=d),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("start_date")},null,8,["modelValue","placeholder"]),(C=n.value)!=null&&C.start?(c(),v("div",tl,s(n.value.start[0]),1)):p("",!0)]),o("div",al,[o("label",ol,s(e.$t("end_date")),1),t(P,{style:{width:"100%"},showButtonBar:"",modelValue:a.value.end,"onUpdate:modelValue":l[16]||(l[16]=d=>a.value.end=d),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("end_date")},null,8,["modelValue","placeholder"]),(U=n.value)!=null&&U.end?(c(),v("div",sl,s(n.value.end[0]),1)):p("",!0)]),o("div",nl,[o("label",il,s(e.$t("Employees")),1),t(O,{filter:"",required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:a.value.assigners,"onUpdate:modelValue":l[17]||(l[17]=d=>a.value.assigners=d),"option-value":"id",options:L.value,optionLabel:"name",placeholder:e.$t("Employees"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(D=n.value)!=null&&D.assigners?(c(),v("div",dl,s(n.value.assigners[0]),1)):p("",!0)]),o("div",ul,[o("label",rl,s(e.$t("lat")),1),t(T,{required:"",class:"bg-[#f7f5f5]",modelValue:a.value.lat,"onUpdate:modelValue":l[18]||(l[18]=d=>a.value.lat=d),placeholder:e.$t("lat")},null,8,["modelValue","placeholder"]),(S=n.value)!=null&&S.lat?(c(),v("div",cl,s(n.value.lat[0]),1)):p("",!0)]),o("div",vl,[o("label",pl,s(e.$t("long")),1),t(T,{required:"",class:"bg-[#f7f5f5]",modelValue:a.value.long,"onUpdate:modelValue":l[19]||(l[19]=d=>a.value.long=d),placeholder:e.$t("long")},null,8,["modelValue","placeholder"]),(q=n.value)!=null&&q.long?(c(),v("div",ml,s(n.value.long[0]),1)):p("",!0)]),o("div",fl,[t(I(H),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:A,style:{width:"100%",height:"500px"},center:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)},zoom:14},{default:u(()=>[t(I(Z),{options:{position:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])])]}),_:1},8,["visible","header"])])]),t(g)])}}};export{_l as default};
